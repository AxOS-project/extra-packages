# Maintainer: Ardox <ardox@axos-project.com>
pkgname=bash
pkgver=5.2
pkgrel=5
pkgdesc="Custom Bash for AxOS"
arch=('x86_64')
url="https://www.gnu.org/software/bash/"
license=('GPL')
depends=('readline')
source=("https://ftp.gnu.org/gnu/bash/bash-$pkgver.tar.gz"
        "ps1.patch")
sha256sums=('a139c166df7ff4471c5e0733051642ee5556c1cc8a4a78f145583c5c81ab32fb'
            '8ce3a9ea03ce7a799248284e56aae375e265c9697e36394ed5e5bc345c3dc399')

prepare() {
  cd "$srcdir/bash-$pkgver"
  patch -p1 < "$srcdir/ps1.patch"
}

build() {
  cd "$srcdir/bash-$pkgver"
  ./configure --prefix=/usr --without-bash-malloc
  make
}

package() {
  cd "$srcdir/bash-$pkgver"
  make DESTDIR="$pkgdir/" install
}

# Optional: package cleanup and metadata
backup=('etc/bash.bashrc')